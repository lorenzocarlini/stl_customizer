{"id":"tV44","dependencies":[{"name":"/home/human/Documents/webdev/text2svg/package.json","includedInParent":true,"mtime":1651843824867},{"name":"/home/human/Documents/webdev/text2svg/node_modules/opentype.js/package.json","includedInParent":true,"mtime":1651842917835},{"name":"/home/human/Documents/webdev/text2svg/node_modules/opentype.js/.babelrc","includedInParent":true,"mtime":1651842917837},{"name":"../../tokenizer","loc":{"line":5,"column":30,"index":95},"parent":"/home/human/Documents/webdev/text2svg/node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","resolved":"/home/human/Documents/webdev/text2svg/node_modules/opentype.js/src/tokenizer.js"},{"name":"../../char","loc":{"line":6,"column":59,"index":173},"parent":"/home/human/Documents/webdev/text2svg/node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","resolved":"/home/human/Documents/webdev/text2svg/node_modules/opentype.js/src/char.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.arabicPresentationForms=n,exports.default=void 0;var e=require(\"../../tokenizer\"),r=require(\"../../char\");function t(e){let t=[].concat(e.backtrack);for(let a=t.length-1;a>=0;a--){const e=t[a],n=(0,r.isIsolatedArabicChar)(e),i=(0,r.isTashkeelArabicChar)(e);if(!n&&!i)return!0;if(n)return!1}return!1}function a(e){if((0,r.isIsolatedArabicChar)(e.current))return!1;for(let t=0;t<e.lookahead.length;t++){const a=e.lookahead[t];if(!(0,r.isTashkeelArabicChar)(a))return!0}return!1}function n(n){const i=this.features.arab,s=this.tokenizer.getRangeTokens(n);if(1===s.length)return;const o=(e,r,t)=>{if(!i.hasOwnProperty(e))return;let a=(e=>1===e.length&&12===e[0].id&&e[0].substitution)(i[e].lookup(t)||null)[0];return a>=0?r.setState(e,a):void 0},c=new e.ContextParams(s,0),u=new e.ContextParams(s.map(e=>e.char),0);s.forEach((e,n)=>{if((0,r.isTashkeelArabicChar)(e.char))return;c.setCurrentIndex(n),u.setCurrentIndex(n);let i=0;switch(t(u)&&(i|=1),a(u)&&(i|=2),i){case 0:return;case 1:o(\"fina\",e,c);break;case 2:o(\"init\",e,c);break;case 3:o(\"medi\",e,c)}})}var i=n;exports.default=i;"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":0}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":13}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":20}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":35}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":43}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":56}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":57}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":64}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":68}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":76}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":100}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":102}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":110}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":123}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":5,"column":0},"generated":{"line":1,"column":125}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":5,"column":0},"generated":{"line":1,"column":129}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":5,"column":0},"generated":{"line":1,"column":131}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":5,"column":0},"generated":{"line":1,"column":139}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":6,"column":0},"generated":{"line":1,"column":158}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":6,"column":0},"generated":{"line":1,"column":160}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":6,"column":0},"generated":{"line":1,"column":168}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":11,"column":0},"generated":{"line":1,"column":182}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"willConnectPrev","original":{"line":11,"column":9},"generated":{"line":1,"column":191}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"charContextParams","original":{"line":11,"column":25},"generated":{"line":1,"column":193}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":12,"column":4},"generated":{"line":1,"column":196}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"backtrack","original":{"line":12,"column":8},"generated":{"line":1,"column":200}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":12,"column":20},"generated":{"line":1,"column":202}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"concat","original":{"line":12,"column":23},"generated":{"line":1,"column":205}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"charContextParams","original":{"line":12,"column":30},"generated":{"line":1,"column":212}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"backtrack","original":{"line":12,"column":48},"generated":{"line":1,"column":214}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":13,"column":4},"generated":{"line":1,"column":225}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":13,"column":9},"generated":{"line":1,"column":229}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"i","original":{"line":13,"column":13},"generated":{"line":1,"column":233}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"backtrack","original":{"line":13,"column":17},"generated":{"line":1,"column":235}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"length","original":{"line":13,"column":27},"generated":{"line":1,"column":237}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":13,"column":36},"generated":{"line":1,"column":244}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"i","original":{"line":13,"column":39},"generated":{"line":1,"column":246}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":13,"column":44},"generated":{"line":1,"column":249}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"i","original":{"line":13,"column":47},"generated":{"line":1,"column":251}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":13,"column":52},"generated":{"line":1,"column":255}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":14,"column":8},"generated":{"line":1,"column":256}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"prevChar","original":{"line":14,"column":14},"generated":{"line":1,"column":262}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"backtrack","original":{"line":14,"column":25},"generated":{"line":1,"column":264}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"i","original":{"line":14,"column":35},"generated":{"line":1,"column":266}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"isolated","original":{"line":15,"column":14},"generated":{"line":1,"column":269}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":15,"column":25},"generated":{"line":1,"column":272}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"prevChar","original":{"line":15,"column":46},"generated":{"line":1,"column":274}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"prevChar","original":{"line":15,"column":46},"generated":{"line":1,"column":276}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"prevChar","original":{"line":15,"column":46},"generated":{"line":1,"column":298}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"tashkeel","original":{"line":16,"column":14},"generated":{"line":1,"column":301}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":16,"column":25},"generated":{"line":1,"column":304}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"prevChar","original":{"line":16,"column":46},"generated":{"line":1,"column":306}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"prevChar","original":{"line":16,"column":46},"generated":{"line":1,"column":308}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"prevChar","original":{"line":16,"column":46},"generated":{"line":1,"column":330}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":17,"column":8},"generated":{"line":1,"column":333}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"isolated","original":{"line":17,"column":13},"generated":{"line":1,"column":337}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"tashkeel","original":{"line":17,"column":26},"generated":{"line":1,"column":341}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":17,"column":36},"generated":{"line":1,"column":343}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":17,"column":43},"generated":{"line":1,"column":350}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":18,"column":8},"generated":{"line":1,"column":352}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"isolated","original":{"line":18,"column":12},"generated":{"line":1,"column":355}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":18,"column":22},"generated":{"line":1,"column":357}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":18,"column":29},"generated":{"line":1,"column":364}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":20,"column":4},"generated":{"line":1,"column":366}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":20,"column":11},"generated":{"line":1,"column":373}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":27,"column":0},"generated":{"line":1,"column":375}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"willConnectNext","original":{"line":27,"column":9},"generated":{"line":1,"column":384}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"charContextParams","original":{"line":27,"column":25},"generated":{"line":1,"column":386}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":28,"column":4},"generated":{"line":1,"column":389}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":28,"column":8},"generated":{"line":1,"column":393}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"charContextParams","original":{"line":28,"column":29},"generated":{"line":1,"column":395}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"charContextParams","original":{"line":28,"column":29},"generated":{"line":1,"column":397}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"charContextParams","original":{"line":28,"column":29},"generated":{"line":1,"column":419}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"current","original":{"line":28,"column":47},"generated":{"line":1,"column":421}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":28,"column":57},"generated":{"line":1,"column":430}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":28,"column":64},"generated":{"line":1,"column":437}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":29,"column":4},"generated":{"line":1,"column":439}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":29,"column":9},"generated":{"line":1,"column":443}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"i","original":{"line":29,"column":13},"generated":{"line":1,"column":447}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":29,"column":17},"generated":{"line":1,"column":449}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"i","original":{"line":29,"column":20},"generated":{"line":1,"column":451}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"charContextParams","original":{"line":29,"column":24},"generated":{"line":1,"column":453}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"lookahead","original":{"line":29,"column":42},"generated":{"line":1,"column":455}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"length","original":{"line":29,"column":52},"generated":{"line":1,"column":465}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"i","original":{"line":29,"column":60},"generated":{"line":1,"column":472}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":29,"column":65},"generated":{"line":1,"column":476}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":30,"column":8},"generated":{"line":1,"column":477}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"nextChar","original":{"line":30,"column":14},"generated":{"line":1,"column":483}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"charContextParams","original":{"line":30,"column":25},"generated":{"line":1,"column":485}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"lookahead","original":{"line":30,"column":43},"generated":{"line":1,"column":487}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"i","original":{"line":30,"column":53},"generated":{"line":1,"column":497}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":32,"column":8},"generated":{"line":1,"column":500}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":31,"column":25},"generated":{"line":1,"column":505}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"nextChar","original":{"line":31,"column":46},"generated":{"line":1,"column":507}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"nextChar","original":{"line":31,"column":46},"generated":{"line":1,"column":509}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"nextChar","original":{"line":31,"column":46},"generated":{"line":1,"column":531}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":32,"column":23},"generated":{"line":1,"column":534}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":32,"column":30},"generated":{"line":1,"column":541}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":34,"column":4},"generated":{"line":1,"column":543}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":34,"column":11},"generated":{"line":1,"column":550}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":41,"column":0},"generated":{"line":1,"column":552}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":41,"column":9},"generated":{"line":1,"column":561}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"range","original":{"line":41,"column":33},"generated":{"line":1,"column":563}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":42,"column":4},"generated":{"line":1,"column":566}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"features","original":{"line":42,"column":10},"generated":{"line":1,"column":572}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":42,"column":21},"generated":{"line":1,"column":574}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"features","original":{"line":42,"column":26},"generated":{"line":1,"column":579}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arab","original":{"line":42,"column":35},"generated":{"line":1,"column":588}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"rangeTokens","original":{"line":43,"column":10},"generated":{"line":1,"column":593}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":43,"column":24},"generated":{"line":1,"column":595}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"tokenizer","original":{"line":43,"column":29},"generated":{"line":1,"column":600}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"getRangeTokens","original":{"line":43,"column":39},"generated":{"line":1,"column":610}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"range","original":{"line":43,"column":54},"generated":{"line":1,"column":625}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":44,"column":4},"generated":{"line":1,"column":628}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":44,"column":31},"generated":{"line":1,"column":631}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"rangeTokens","original":{"line":44,"column":8},"generated":{"line":1,"column":635}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"length","original":{"line":44,"column":20},"generated":{"line":1,"column":637}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":44,"column":34},"generated":{"line":1,"column":644}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":45,"column":4},"generated":{"line":1,"column":651}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"applyForm","original":{"line":50,"column":10},"generated":{"line":1,"column":657}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":50,"column":22},"generated":{"line":1,"column":659}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"tag","original":{"line":50,"column":23},"generated":{"line":1,"column":660}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"token","original":{"line":50,"column":28},"generated":{"line":1,"column":662}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"params","original":{"line":50,"column":35},"generated":{"line":1,"column":664}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":51,"column":8},"generated":{"line":1,"column":669}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"features","original":{"line":51,"column":13},"generated":{"line":1,"column":673}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"hasOwnProperty","original":{"line":51,"column":22},"generated":{"line":1,"column":675}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"tag","original":{"line":51,"column":37},"generated":{"line":1,"column":690}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":51,"column":43},"generated":{"line":1,"column":693}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":52,"column":8},"generated":{"line":1,"column":700}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"substIndex","original":{"line":53,"column":12},"generated":{"line":1,"column":704}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"substitution","original":{"line":45,"column":33},"generated":{"line":1,"column":706}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"substitution","original":{"line":45,"column":33},"generated":{"line":1,"column":707}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":46,"column":32},"generated":{"line":1,"column":710}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"substitution","original":{"line":46,"column":8},"generated":{"line":1,"column":714}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"length","original":{"line":46,"column":21},"generated":{"line":1,"column":716}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":47,"column":31},"generated":{"line":1,"column":724}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"substitution","original":{"line":47,"column":8},"generated":{"line":1,"column":729}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":47,"column":21},"generated":{"line":1,"column":731}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"id","original":{"line":47,"column":24},"generated":{"line":1,"column":734}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"substitution","original":{"line":48,"column":8},"generated":{"line":1,"column":738}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":48,"column":21},"generated":{"line":1,"column":740}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"substitution","original":{"line":48,"column":24},"generated":{"line":1,"column":743}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"getSubstitutionIndex","original":{"line":53,"column":25},"generated":{"line":1,"column":756}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"features","original":{"line":52,"column":27},"generated":{"line":1,"column":757}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"tag","original":{"line":52,"column":36},"generated":{"line":1,"column":759}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"lookup","original":{"line":52,"column":41},"generated":{"line":1,"column":762}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"params","original":{"line":52,"column":48},"generated":{"line":1,"column":769}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":52,"column":59},"generated":{"line":1,"column":773}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":53,"column":60},"generated":{"line":1,"column":779}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":54,"column":8},"generated":{"line":1,"column":782}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"substIndex","original":{"line":54,"column":12},"generated":{"line":1,"column":789}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":54,"column":26},"generated":{"line":1,"column":792}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"token","original":{"line":55,"column":19},"generated":{"line":1,"column":794}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"setState","original":{"line":55,"column":25},"generated":{"line":1,"column":796}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"tag","original":{"line":55,"column":34},"generated":{"line":1,"column":805}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"substIndex","original":{"line":55,"column":39},"generated":{"line":1,"column":807}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":54,"column":8},"generated":{"line":1,"column":815}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"tokensParams","original":{"line":58,"column":10},"generated":{"line":1,"column":818}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":58,"column":25},"generated":{"line":1,"column":820}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"ContextParams","original":{"line":58,"column":29},"generated":{"line":1,"column":824}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":58,"column":25},"generated":{"line":1,"column":826}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"rangeTokens","original":{"line":58,"column":43},"generated":{"line":1,"column":840}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":58,"column":56},"generated":{"line":1,"column":842}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"charContextParams","original":{"line":59,"column":10},"generated":{"line":1,"column":845}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":59,"column":30},"generated":{"line":1,"column":847}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"ContextParams","original":{"line":59,"column":34},"generated":{"line":1,"column":851}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":59,"column":30},"generated":{"line":1,"column":853}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"rangeTokens","original":{"line":59,"column":48},"generated":{"line":1,"column":867}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"map","original":{"line":59,"column":60},"generated":{"line":1,"column":869}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"t","original":{"line":59,"column":64},"generated":{"line":1,"column":873}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"t","original":{"line":59,"column":67},"generated":{"line":1,"column":876}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"char","original":{"line":59,"column":69},"generated":{"line":1,"column":878}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":59,"column":76},"generated":{"line":1,"column":884}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"rangeTokens","original":{"line":60,"column":4},"generated":{"line":1,"column":887}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"forEach","original":{"line":60,"column":16},"generated":{"line":1,"column":889}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":60,"column":24},"generated":{"line":1,"column":897}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"token","original":{"line":60,"column":25},"generated":{"line":1,"column":898}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"i","original":{"line":60,"column":32},"generated":{"line":1,"column":900}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":61,"column":8},"generated":{"line":1,"column":905}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":61,"column":12},"generated":{"line":1,"column":909}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"token","original":{"line":61,"column":33},"generated":{"line":1,"column":911}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"token","original":{"line":61,"column":33},"generated":{"line":1,"column":913}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"token","original":{"line":61,"column":33},"generated":{"line":1,"column":935}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"char","original":{"line":61,"column":39},"generated":{"line":1,"column":937}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":61,"column":46},"generated":{"line":1,"column":943}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"tokensParams","original":{"line":62,"column":8},"generated":{"line":1,"column":950}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"setCurrentIndex","original":{"line":62,"column":21},"generated":{"line":1,"column":952}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"i","original":{"line":62,"column":37},"generated":{"line":1,"column":968}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"charContextParams","original":{"line":63,"column":8},"generated":{"line":1,"column":971}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"setCurrentIndex","original":{"line":63,"column":26},"generated":{"line":1,"column":973}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"i","original":{"line":63,"column":42},"generated":{"line":1,"column":989}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":64,"column":8},"generated":{"line":1,"column":992}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"CONNECT","original":{"line":64,"column":12},"generated":{"line":1,"column":996}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":64,"column":22},"generated":{"line":1,"column":998}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":67,"column":8},"generated":{"line":1,"column":1000}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"willConnectPrev","original":{"line":65,"column":12},"generated":{"line":1,"column":1007}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"charContextParams","original":{"line":65,"column":28},"generated":{"line":1,"column":1009}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"CONNECT","original":{"line":65,"column":48},"generated":{"line":1,"column":1014}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":65,"column":59},"generated":{"line":1,"column":1017}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"willConnectNext","original":{"line":66,"column":12},"generated":{"line":1,"column":1020}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"charContextParams","original":{"line":66,"column":28},"generated":{"line":1,"column":1022}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"CONNECT","original":{"line":66,"column":48},"generated":{"line":1,"column":1027}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":66,"column":59},"generated":{"line":1,"column":1030}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"CONNECT","original":{"line":67,"column":16},"generated":{"line":1,"column":1033}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":68,"column":12},"generated":{"line":1,"column":1036}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":68,"column":17},"generated":{"line":1,"column":1041}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":69,"column":16},"generated":{"line":1,"column":1043}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":70,"column":12},"generated":{"line":1,"column":1050}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":70,"column":17},"generated":{"line":1,"column":1055}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"applyForm","original":{"line":71,"column":16},"generated":{"line":1,"column":1057}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":71,"column":26},"generated":{"line":1,"column":1059}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"token","original":{"line":71,"column":34},"generated":{"line":1,"column":1066}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"tokensParams","original":{"line":71,"column":41},"generated":{"line":1,"column":1068}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":72,"column":16},"generated":{"line":1,"column":1071}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":73,"column":12},"generated":{"line":1,"column":1077}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":73,"column":17},"generated":{"line":1,"column":1082}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"applyForm","original":{"line":74,"column":16},"generated":{"line":1,"column":1084}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":74,"column":26},"generated":{"line":1,"column":1086}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"token","original":{"line":74,"column":34},"generated":{"line":1,"column":1093}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"tokensParams","original":{"line":74,"column":41},"generated":{"line":1,"column":1095}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":75,"column":16},"generated":{"line":1,"column":1098}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":76,"column":12},"generated":{"line":1,"column":1104}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":76,"column":17},"generated":{"line":1,"column":1109}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"applyForm","original":{"line":77,"column":16},"generated":{"line":1,"column":1111}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","original":{"line":77,"column":26},"generated":{"line":1,"column":1113}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"token","original":{"line":77,"column":34},"generated":{"line":1,"column":1120}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"tokensParams","original":{"line":77,"column":41},"generated":{"line":1,"column":1122}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":1128}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":1132}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":1134}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":1136}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":1144}},{"source":"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js","name":"arabicPresentationForms","original":{"line":83,"column":15},"generated":{"line":1,"column":1152}}],"sources":{"../node_modules/opentype.js/src/features/arab/arabicPresentationForms.js":"/**\n * Apply Arabic presentation forms to a range of tokens\n */\n\nimport { ContextParams } from '../../tokenizer';\nimport { isIsolatedArabicChar, isTashkeelArabicChar } from '../../char';\n/**\n * Check if a char can be connected to it's preceding char\n * @param {ContextParams} charContextParams context params of a char\n */\nfunction willConnectPrev(charContextParams) {\n    let backtrack = [].concat(charContextParams.backtrack);\n    for (let i = backtrack.length - 1; i >= 0; i--) {\n        const prevChar = backtrack[i];\n        const isolated = isIsolatedArabicChar(prevChar);\n        const tashkeel = isTashkeelArabicChar(prevChar);\n        if (!isolated && !tashkeel) return true;\n        if (isolated) return false;\n    }\n    return false;\n}\n\n/**\n * Check if a char can be connected to it's proceeding char\n * @param {ContextParams} charContextParams context params of a char\n */\nfunction willConnectNext(charContextParams) {\n    if (isIsolatedArabicChar(charContextParams.current)) return false;\n    for (let i = 0; i < charContextParams.lookahead.length; i++) {\n        const nextChar = charContextParams.lookahead[i];\n        const tashkeel = isTashkeelArabicChar(nextChar);\n        if (!tashkeel) return true;\n    }\n    return false;\n}\n\n/**\n * Apply arabic presentation forms to a list of tokens\n * @param {ContextRange} range a range of tokens\n */\nfunction arabicPresentationForms(range) {\n    const features = this.features.arab;\n    const rangeTokens = this.tokenizer.getRangeTokens(range);\n    if (rangeTokens.length === 1) return;\n    const getSubstitutionIndex = substitution => (\n        substitution.length === 1 &&\n        substitution[0].id === 12 &&\n        substitution[0].substitution\n    );\n    const applyForm = (tag, token, params) => {\n        if (!features.hasOwnProperty(tag)) return;\n        let substitution = features[tag].lookup(params) || null;\n        let substIndex = getSubstitutionIndex(substitution)[0];\n        if (substIndex >= 0) {\n            return token.setState(tag, substIndex);\n        }\n    };\n    const tokensParams = new ContextParams(rangeTokens, 0);\n    const charContextParams = new ContextParams(rangeTokens.map(t=>t.char), 0);\n    rangeTokens.forEach((token, i) => {\n        if (isTashkeelArabicChar(token.char)) return;\n        tokensParams.setCurrentIndex(i);\n        charContextParams.setCurrentIndex(i);\n        let CONNECT = 0; // 2 bits 00 (10: can connect next) (01: can connect prev)\n        if (willConnectPrev(charContextParams)) CONNECT |= 1;\n        if (willConnectNext(charContextParams)) CONNECT |= 2;\n        switch (CONNECT) {\n            case 0: // isolated * original form\n                return;\n            case 1: // fina\n                applyForm('fina', token, tokensParams);\n                break;\n            case 2: // init\n                applyForm('init', token, tokensParams);\n                break;\n            case 3: // medi\n                applyForm('medi', token, tokensParams);\n                break;\n        }\n    });\n}\n\nexport default arabicPresentationForms;\nexport { arabicPresentationForms };\n"},"lineCount":null}},"error":null,"hash":"a38b008ac863e013cb56ac018cb99990","cacheData":{"env":{}}}